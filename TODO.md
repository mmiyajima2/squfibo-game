# タスク

## [x] カードも正方形にしてほしい
- カードが現在長方形となっているので正方形にしたい
- ボードのマスは正方形なのでそれに合わせたい
- このゲームはSqureが大事ななので

## [x] 実況エリアのメッセージの数制限が必要（フェーズ2b-2）
- メッセージは最新含め３件でよい
- 画面がどんどん下に伸びてしまうから
- 変数としても抱えておく必要なく、すてればよい（メモリ圧迫解消）

## [x] 基本操作を実装してほしい（フェーズ2b）
   - 手札からカードを選択
   - 盤面の空きマスにカードを配置
   - ターン終了ボタン
   - 追加改善: 配置可能なセルのハイライト表示、エラーメッセージ表示


## [x] プレゼンテーション改善(step1-2)
  - 上下の画面の収まりが悪いので、全体的に縦サイズを縮めてほしい
  - カードは正方形にしてほしい、Squreはゲームのテーマだから
  - ボードの横に実況エリアを用意してほしい\
  子供達がわかりやすいようにしたい、「CPUのターンです」「CPUがカードをおきました」
  - いきなり実装せず、一般的なUI/UX設計から考えて、上記をレビューした意見がほしい

## [x] プレゼンテーション層の実装をしてほしい(step1)
   - CardComponent: カードの視覚的表示（既存の画像素材を使用）
   - BoardGrid & Cell: 盤面の表示とクリック可能なマス
   - HandArea: 手札の表示
   - GameStatus: 現在のターン、星の数、山札残り枚数
   - テーマはライトで
   - 上側にCPU側の領域、下側に人間領域がくる前提で 

## [x] UI状態管理の作成作成してほしい
- このファイルの [Claude Code レポート] の計画にならうこと
- Hookの作成でとどめること

## [x] ゲーム状態管理Hookの作成してほしい
- このファイルの [Claude Code レポート] の計画にならうこと
- Hookの作成でとどめること

## [x] ドメイン層ができたあとの手順についてアドバイスがほしい
- まだ実装はしなくてよい
- 当面の目標は、1人対局モードが実現できること
- （その次にCPU(Easy)を用意する予定）

### Claude Code レポート

#### 現在の状態（完成済み）
ドメイン層は完全に実装されており、優れた設計になっています：

**実装済みコンポーネント:**
- **Value Objects**: `CardColor`, `CardValue`, `Position`
- **Entities**: `Card`, `Hand`, `Board`, `Deck`, `Player`
- **Services**: `Combo`, `ComboDetector`
- **Game Controller**: `Game`（ゲーム状態管理、ターン処理、役の処理）
- **テストコード**: 全ドメインロジックに対する包括的なユニットテスト

#### 1人対局モード実現のための推奨手順

ドメイン層が完成したので、次は**アプリケーション層**と**プレゼンテーション層**を実装します。

##### フェーズ1: アプリケーション層（状態管理）
**目的**: Reactコンポーネントとドメイン層をつなぐ

1. **ゲーム状態管理Hookの作成** (`src/hooks/useGameState.ts`)
   - `Game`クラスのインスタンスを保持
   - ゲーム状態の更新と再レンダリングを管理
   - カード配置、役の申告、ターン終了などのアクションを提供

2. **UI状態管理の作成** (`src/hooks/useUIState.ts`)
   - 選択中のカード、ハイライト表示など
   - 役申告モードの状態
   - エラーメッセージやアニメーションの状態

##### フェーズ2: プレゼンテーション層（コンポーネント）
**目的**: ゲームをブラウザで遊べるようにする

推奨コンポーネント構成:
```
src/components/
├── Game/
│   ├── GameContainer.tsx      # ゲーム全体のコンテナ
│   └── GameStatus.tsx         # ターン情報、星の数など
├── Board/
│   ├── BoardGrid.tsx          # 3x3の盤面
│   └── Cell.tsx               # 各マス（カード配置場所）
├── Card/
│   ├── CardComponent.tsx      # カードの表示
│   └── CardSymbol.tsx         # カードの数字とシンボル
├── Hand/
│   └── HandArea.tsx           # 手札エリア
└── ComboPanel/
    └── ComboClaimPanel.tsx    # 役申告パネル
```

**実装の優先順位:**
1. **基本UI**（フェーズ2a）
   - CardComponent: カードの視覚的表示（既存の画像素材を使用）
   - BoardGrid & Cell: 盤面の表示とクリック可能なマス
   - HandArea: 手札の表示
   - GameStatus: 現在のターン、星の数、山札残り枚数

2. **基本操作**（フェーズ2b）
   - 手札からカードを選択
   - 盤面の空きマスにカードを配置
   - ターン終了ボタン

3. **役申告機能**（フェーズ2c）
   - ComboDetectorを使った役の検出（ヒント表示用）
   - 役申告パネル
   - 役が成立した時の処理（カード除去、ドロー、星獲得）

4. **特殊ケース処理**（フェーズ2d）
   - 盤面満杯時のカード廃棄処理
   - 手札0枚時の山札からの直接配置
   - ゲーム終了と勝敗表示

##### フェーズ3: ポリッシュとUX改善
- アニメーション（カード配置、除去、星獲得）
- エラーメッセージの表示
- 操作のガイド・チュートリアル

#### 技術的な推奨事項

**状態管理:**
- React Hooksのみ（`useState`, `useReducer`）で十分
- 複雑な状態遷移がある場合は`useReducer`を検討
- グローバル状態管理ライブラリ（Redux等）は不要

**スタイリング:**
- CSS ModulesまたはPlain CSS
- ライトモードのトーンに合わせたデザイン
- レスポンシブ対応（モバイルでも遊べるように）

**ドメイン層との連携:**
- Gameクラスは不変ではないため、状態更新時に再レンダリングをトリガー
- `useState`で`Game`インスタンスを保持し、更新時に`setState`を呼ぶ
- または、各アクション後に強制再レンダリング（`useState`のカウンターなど）

#### 次のステップ（実装開始時）

まず以下から開始することを推奨:
1. `src/hooks/useGameState.ts`の作成
2. `src/components/Card/CardComponent.tsx`の作成
3. `src/components/Board/BoardGrid.tsx`と`Cell.tsx`の作成
4. `src/components/Game/GameContainer.tsx`でこれらを統合
5. `App.tsx`を更新してGameContainerを表示

この順序で進めることで、段階的に動作確認しながら開発できます。

## [x] カードのシンボルになる画像素材をつくってほしい
- 赤1, 赤4, 赤9, 赤16
- 青1, 青4, 青9, 青16
- ライトモードのトーンのゲームにしたいのでそこで生えるようにしてほしい

## [x] まずドメイン層のクラスの設計を実装をお願いしたい
- コントローラー層、プレゼンテーション層は、スケルトンでよい
- ドメインの責務になるロジックの実装、そのUTコードまで実装してほしい
- クラス図（クラス名だけでOK）を示せるとなおよい（任意）

## [x] READM.md を仕様書に基づいて更新してほしい
- 日本語でしあげてほしい
- MITライセンスのプロジェクトにしてほしい（別ファイルになってもよい）
- 著作権について保護対象であることを示してほしい